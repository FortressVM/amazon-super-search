<script>
  const categories = [
    { name: 'All Categories', value: '' },
    { name: 'Books', value: 'stripbooks' },
    { name: 'Electronics', value: 'electronics' },
    { name: 'Clothing & Accessories', value: 'fashion' },
    { name: 'Home & Kitchen', value: 'garden' },
    { name: 'Beauty & Personal Care', value: 'beauty' },
    { name: 'Toys & Games', value: 'toys-and-games' },
    { name: 'Health & Personal Care', value: 'hpc' }
  ];

  const ratings = [
    { name: 'Any Rating', value: '' },
    { name: '4 stars & up', value: '4' },
    { name: '3 stars & up', value: '3' }
  ];

  window.onload = () => {
    populateDropdown('category', categories);
    populateDropdown('minRating', ratings);
    restoreLastSearch();
    attachClickTracking();
  };

  function populateDropdown(id, list) {
    const select = document.getElementById(id);
    if (!select) return;
    list.forEach(opt => {
      const option = document.createElement('option');
      option.textContent = opt.name;
      option.value = opt.value;
      select.appendChild(option);
    });
  }

  function restoreLastSearch() {
    const saved = localStorage.getItem('last-search');
    if (saved) {
      const data = JSON.parse(saved);
      for (const [id, val] of Object.entries(data)) {
        const el = document.getElementById(id);
        if (el) el.value = val;
      }
    }
  }

  function attachClickTracking() {
    document.querySelectorAll('button, select, input').forEach(el => {
      el.addEventListener('click', () => {
        console.log(`Clicked: ${el.id || el.name || el.tagName}`);
      });
    });
  }

  function savePreset() {
    const query = document.getElementById('search').value;
    if (!query) return alert('Enter a search query first.');
    const key = prompt('Name this preset:');
    if (key) {
      const data = getCurrentSearch();
      localStorage.setItem(`preset-${key}`, JSON.stringify(data));
      localStorage.setItem('last-search', JSON.stringify(data));
    }
  }

  function startSearch() {
    const query = document.getElementById('search')?.value.trim();
    if (!query) return alert('Search keywords are required.');
    localStorage.setItem('last-search', JSON.stringify(getCurrentSearch()));
    logDebug('üîç Search triggered');
    // ... existing logic continues ...
  }

  // Keep rest of your script untouched...
</script>
